<div>
	<div id="profile-container">
		<h1>My profile</h1>
		<h3 id="uid">ID:</h3>
		<h3 id="uemail">Email:</h3>
		<h3 id="uname">Name:</h3>
		<h3 id="uphone">Phone:</h3>
	</div>
	
	<hr>

	<div id="create-item-container">
		<h2>Add new item</h2>
		<form id="create-item">
			<input name="title" type="text" placeholder="Item title" required/>
			<input name="price" type="number" placeholder="Item price" required/>
			
			<input type="submit" value="Create item" class="btn btn-default"/>
		</form>
	</div>
</div>

<script type="text/javascript">
	window.onload = function(){
		/*
		* Get info about myself request
		*/
		$.ajax({
			url:  '/api/me',
			type: 'GET',
			beforeSend: function(req){
				req.setRequestHeader("authorization", window.localStorage.getItem('token'));
			},
			success: function(res){
				$('#uid').html('ID: ' + res.id);
				$('#uemail').html('Email: ' + res.email);
				$('#uname').html('Name: ' + res.name);
				$('#uphone').html('Phone: ' + res.phone);
			},
			error: function(err){
				console.log(err);
			}
		});

		/*
		* Create new item request
		*/
		$('#create-item').on('submit', function(e){
			e.preventDefault();
			var itemData = {};
			
			itemData.title = $('form input[name="title"]').val();
			itemData.price = $('form input[name="price"]').val();

			$.ajax({
				url: '/api/item',
				type: 'POST',
				data: itemData,
				beforeSend: function(req){
					req.setRequestHeader("authorization", window.localStorage.getItem('token'));
				},
				success: function(res){
					alert('Item create success');
				},
				error: function(res){
					alert('Item create error');	
				}
			});
		});
	};
</script>